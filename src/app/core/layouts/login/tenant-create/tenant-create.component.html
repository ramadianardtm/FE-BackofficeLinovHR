<!-- <app-component-logger-form [storeItem]="null" [formValue]="formReady"> </app-component-logger-form> -->
<div class="container">
<!--    <div class="row">
        <div class="col-sm">
            <button type="button" [routerLink]="['/home']" class="btn btn-warning ml-2 mb-2">Back</button>
        </div>
    </div>-->
    <div class="row">
        <div class="col-sm">
            <h4>Add Tenant</h4>
            <hr>
        </div>
    </div>
    <div class="alert alert-primary" role="alert" style="background-color: #EFF0F7; border:none;border-radius:5px;">
        <div class="row">
            <div class="col-sm" style="background-color: #EFF0F7;">
                <h4></h4>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <form [formGroup]="formReady" class="group-shadow">
                <div class="form-container">
                    <div class="form-group row">
                        <label for="staticEmail" class="col-sm-4 col-form-label">Tenant Name</label>
                        <div class="col-sm-4">
                            <input type="text" formControlName="name" placeholder="Input Tenant Name"
                                pattern="[a-zA-Z0-9 ]*" class="form-control" />
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="staticEmail" class="col-sm-4 col-form-label">PIC</label>
                        <div class="col-sm-4">
                            <input type="text" formControlName="pic" placeholder="Input PIC Name" pattern="[a-zA-Z0-9 ]*"
                                class="form-control" />
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="staticEmail" class="col-sm-4 col-form-label">Phone</label>
                        <div class="col-sm-4">
                            <input type="text" formControlName="phone" placeholder="Input Phone" pattern="[a-zA-Z0-9 ]*"
                                class="form-control" />
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="staticEmail" class="col-sm-4 col-form-label">Tenant Email</label>
                        <div class="col-sm-4">
                            <input type="text" formControlName="email" placeholder="company@gmail.com"
                                pattern="[a-zA-Z0-9 ]*" class="form-control" />
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="inputPassword" class="col-sm-4 col-form-label">Start Date</label>
                        <div class="col-sm-4">
                            <p-calendar [monthNavigator]="true" appendTo="body" [yearNavigator]="true" readonlyInput="true"
                                formControlName="startDateApp" class="calender border-none pad-4"
                                yearRange="{{ '' | primeYearRange }}"> </p-calendar>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="staticEmail" class="col-sm-4 col-form-label">End Date</label>
                        <div class="col-sm-4">
                            <p-calendar [monthNavigator]="true" appendTo="body" [yearNavigator]="true" readonlyInput="true"
                                formControlName="endDateApp" class="border-none pad-4"
                                yearRange="{{ '' | primeYearRange }}"> </p-calendar>
                        </div>
                    </div>
                    <div class="division">
                        <p-tabView>
                            <p-tabPanel header="Packages">
                                <select class="custom-select" formControlName="plans">
                                    <ng-container *ngIf="plansData; else elseTemplate">
                                        <option *ngFor="let item of plansData" [value]="item.id">
                                            {{item.name}}
                                        </option>
                                        <option value="custom">
                                            Custom
                                        </option>
                                    </ng-container>
                                    <ng-template #elseTemplate>
                                        Loading Data...
                                    </ng-template>
                                </select>
                            </p-tabPanel>
                        </p-tabView>
                        <div *ngIf="formReady.value.plans == 'custom'">
                            <div class="form-group row">
                                <div class="col-md-12 nodeParent">
                                    <app-form-package [isModuleOnly]="true" (emitFormPackage)="emit($event)">
                                    </app-form-package>
                                </div>
                            </div>
                        </div>
                    </div>
                        <div class="col-header">
                            <h4>Company</h4>
                            <hr>
                            <button (click)="addCompany()" type="button" class="btn btn-primary form-button">Add Company</button>
                        </div>
                    <p-tabView>
                        <p-tabPanel
                            *ngFor="let item of formReady['controls'].company['controls']; let i = index;last as isFirst"
                            [selected]="isFirst" header="Company {{i+1}}" >
                            <div formGroupName="company">
                                <div [formGroupName]="i">
                                    <div class="row styling-remove">
                                        <div *ngIf="i > 0" class="col-md-12  d-flex flex-row-reverse">
                                            <i class="fa fa-close" (click)="removeCompany(i)" style="cursor: pointer;"></i>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="inputPassword" class="col-sm-4 col-form-label">Name</label>
                                        <div class="col-sm-8">
                                            <input type="text" formControlName="name" pattern="[a-zA-Z0-9 ]*"
                                                class="form-control" placeholder="Company Name" />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="inputPassword" class="col-sm-4 col-form-label">Tax Number</label>
                                        <div class="col-sm-8">
                                            <p-inputMask placeholder="99.999.999.9-999.999" mask="99.999.999.9-999.999"
                                                [unmask]="true" type="text" formControlName="taxNamber"
                                                pattern="[a-zA-Z0-9 ]*" placeholder=""></p-inputMask>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="inputPassword" class="col-sm-4 col-form-label">Language Default</label>
                                        <div class="col-sm-8">
                                            <select value="" class="custom-select" formControlName="languageDefault" placeholder="">
                                                <option value="" selected disabled>Select Language</option>
                                                <option *ngFor="let item of languages" [value]="item.key">
                                                    {{item.value}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="inputPassword" class="col-sm-4 col-form-label">Date Format</label>
                                        <div class="col-sm-8">
                                            <select class="custom-select" formControlName="dateFormat">
                                                <option *ngFor="let item of dateFormats" [value]="item.key">
                                                    {{item.value}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="inputPassword" class="col-sm-4 col-form-label">Currency</label>
                                        <div class="col-sm-8">
                                            <select class="custom-select" formControlName="curency">
                                                <option *ngFor="let item of currencies" [value]="item.key">
                                                    {{item.value}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="inputPassword" class="col-sm-4 col-form-label">Address</label>
                                        <div class="col-sm-8">
                                            <input type="textarea" formControlName="address" pattern="[a-zA-Z0-9 ]*"
                                                class="form-control" placeholder="Company Address" style="height: 50px" />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="inputPassword" class="col-sm-4 col-form-label">Postal Code</label>
                                        <div class="col-sm-8">
                                            <input type="text" formControlName="postalCode" pattern="[a-zA-Z0-9 ]*"
                                                class="form-control" placeholder="Company Postal Code" />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="inputPassword" class="col-sm-4 col-form-label">Company Position</label>
                                        <div class="col-sm-8">
                                            <input type="text" formControlName="companyPosition" pattern="[a-zA-Z0-9 ]*"
                                                class="form-control" placeholder="Company Position" />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="inputPassword" class="col-sm-4 col-form-label">Phone</label>
                                        <div class="col-sm-8">
                                            <input type="text" formControlName="phone" pattern="[a-zA-Z0-9 ]*"
                                                class="form-control" placeholder="Company Phone" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </p-tabPanel>
                    </p-tabView>
    
                    <div class="form-group row" style="justify-content:right; margin-right: 5px;">
                        <button type="button" (click)="submit()" class="btn-submit mt-2"><i class="fas fa-save" style="margin-right: 5px;"></i>Submit</button>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>